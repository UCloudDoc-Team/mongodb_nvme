

# 备份与恢复管理

## 备份方式

备份分为自动备份和手工备份两种。

### 自动备份

自动备份默认每周三、周日 5:00~6:00进行一次备份。
点击“自动备份策略”按钮, 可以调整自动备份策略, 包括是否开启自动备份、备份周期和备份时间。

![image](/images/backup/mongodb_20231123-144403.png)

备份数据保留最近7份，最长保留30天，如果需要长期保存备份数据，请自行下载保存。

### 手工备份

MongoDB支持手工备份，用户可以保存某些关键时间点的重要数据备份。创建手动备份时，用户只需要输入备份名称，后台会立刻开始进行备份工作。

![image](/images/backup/mongodb_20220719_06.png)

手工备份允许保留最近3份，如果超过3份会自动删除最早的手动备份。备份数据最长保留30天，如果需要长期保存备份数据，请自行下载保存。

## 备份取消

用户可以在“备份管理”页面中看到所有备份, 对于未完成的备份, 用户可以点击“取消”按钮取消备份。

![image](/images/backup/mongodb_20231123-145009.png)

## 备份下载

用户可以下载自动备份和手工备份生成的备份文件(分片集备份暂不支持下载)。

要查看对应MongoDB实例的备份文件，请选择对应的MongoDB实例，在详情页点击“备份管理”；即可打开MongoDB实例备份列表。

![imagel](/images/backup/mongodb_20220719_07.png)

点击下载即可弹出下载框进行下载。

![image](/images/backup/mongodb_20220719_08.png)

## 从备份恢复至新实例

用户可以选择备份文件列表中的“恢复至新实例”即可从备份创建MongoDB实例。初始化时间取决于数据量大小。

![image](/images/backup/mongodb_20220719_04.png)
![image](/images/backup/mongodb_20230801_01.png)

注意：

备份文件压缩比为5:1，建议创建时的磁盘空间大小为备份文件大小的5倍以上。

## 恢复管理

点击恢复管理, 可以查看当前集群恢复列表。

![image](/images/backup/mongodb_20230801_02.png)

点击 UMongoDB 管理, 可以看到目标集群已出现在集群列表中。

![image](/images/backup/mongodb_20230801_03.png)

